import { Badge } from 'terra-show-hide/package.json?dev-site-package';
import { Notice } from "@cerner/terra-docs";

import DefaultShowHide from './example/DefaultShowHide?dev-site-example';
import CustomButtonTextShowHide from './example/CustomButtonTextShowHide?dev-site-example';
import LinkShowHide from './example/LinkShowHide?dev-site-example';
import InitiallyOpenShowHide from './example/InitiallyOpenShowHide?dev-site-example';
import ButtonAlignCenterShowHide from './example/ButtonAlignCenterShowHide?dev-site-example';
import ButtonAlignRightShowHide from './example/ButtonAlignRightShowHide?dev-site-example';
import NoPreviewShowHide from './example/NoPreviewShowHide?dev-site-example';
import NoFocusRefShowHide from './example/NoFocusRefShowHide?dev-site-example';
import MultipleChildrenShowHide from './example/MultipleChildrenShowHide?dev-site-example';

import ShowHidePropsTable from 'terra-show-hide/src/ShowHide?dev-site-props-table';
import ParagraphPropsTable from 'terra-show-hide/src/_ShowHideParagraph?dev-site-props-table';

<Badge />

# Terra Show Hide

Show Hide Component that will show a preview of content and then expand it with a Show More button.

## Getting Started

- Install with [npmjs](https://www.npmjs.com):
  - `npm install terra-show-hide`

<!-- AUTO-GENERATED-CONTENT:START Peer Dependencies -->
## Peer Dependencies

This component requires the following peer dependencies be installed in your app for the component to properly function.

| Peer Dependency | Version |
|-|-|
| react | ^16.8.5 |
| react-dom | ^16.8.5 |
| react-intl | ^2.8.0 |

<!-- AUTO-GENERATED-CONTENT:END -->

## Implementation Notes:

The Show-Hide component must be composed inside the [Base][1] component with a locale in order for it to load the correct translation strings.

[1]: https://engineering.cerner.com/terra-core/components/terra-base/base/base

## Usage

```jsx
import ShowHide, { Paragraph } from 'terra-show-hide';
```

#### A single paragraph of text
  - At the top level of your component declare a `ref`, pass it as `focusRef` props to `ShowHide` component. Pass a preview node as a prop to `ShowHide` component.
  - Use `Paragraph` component inside `<p>` tag. A `Paragraph` component allows `ShowHide` component to set focus on the beginning of the hidden portion of the text upon opening. 
  - The text splitted in the preview and the rest of the text portions has to be passed as string props, and the `focusRef` should be forwarded to `Paragraph` component.

  ```jsx
  import React, { useRef, useState } from 'react';
  import ShowHide, { Paragraph } from 'terra-show-hide';

  const MyComponent = () => {
    const focusRef = useRef(null);
    const [isOpen, setIsOpen] = useState(false);
    const toggleShowHide = () => setIsOpen(!isOpen);

    // Split text into preview text and the rest of the text you wish to be revealed when the 'show' action is taken.
    const previewText = 'Patients are requesting greater affordability and efficiency in healthcare.';
    const text = 'With procedures performed in an ambulatory surgery center costing up to 60% less compared to a hospital outpatient department (1), the demand for these facilities is increasing.';

    return (
      <ShowHide focusRef={ focusRef } preview={ <p>{ previewText }</p> } isOpen={isOpen} onChange={toggleShowHide} >
        <p>
          <Paragraph ref={ focusRef } previewText={ previewText } text={ text } />
        </p>
      </ShowHide>
    );
  }
  ```

#### Multiple children
  - At the top level of your component declare a `ref`, pass it as `focusRef` props to `ShowHide` component. Pass a preview node as a prop to `ShowHide` component.
  - A `Paragraph` component allows `ShowHide` component to set focus on the beginning of the hidden portion of the text upon opening. 
  - Duplicate the preview nodes as `ShowHide` children.
  - When the preview nodes end, add a `Paragraph` element as a child to the next node. 
  - Forwarding `focusRef` to `Paragraph` component allows `ShowHide` component to set focus on the beginning of the text in that node upon opening.
  - Pass the text as a prop to `Paragraph` component. Omit `previewText` prop.

  ```jsx
    import React, { useState, useRef } from 'react';
    import ShowHide, { Paragraph } from 'terra-show-hide';

    const MyComponent = () => {
      const focusRef = useRef(null);
      const [isOpen, setIsOpen] = useState(false);
      const toggleShowHide = () => setIsOpen(!isOpen);

      // This example's content is a header and a list of 4 items.
      const header = 'Key Benefits of Cerner Cardiovascular Solutions';
      const list = [
        'Eliminates silos of information and the resulting inefficiencies with a unified EHR and cardiovascular system',
        'Enhances clinical, financial and performance outcomes with comprehensive procedural documentation',
        'Creates efficient diagnostic workflows, image management and analysis',
        'Promotes cardiac disease management through health maintenance protocols',
      ];

      // The header and the first two items of the list will be displayed in preview portion.
      const preview = [
        <h3 key="header">{header}</h3>,
        <ul key="list">
          <li>{list[0]}</li>
          <li>{list[1]}</li>
        </ul>,
      ];

      return (
        <ShowHide focusRef={focusRef} preview={preview} isOpen={isOpen} onChange={toggleShowHide} >
          <h3>{header}</h3>
          <ul>
            <li>{list[0]}</li>
            <li>{list[1]}</li>
            <li>
              <Paragraph ref={focusRef} text={list[2]} />
            </li>
            <li>{list[3]}</li>
          </ul>
        </ShowHide>
      );
    }
  ```

#### First hidden child is an interactive element (link, button, etc)
  - At the top level of your component declare a `ref`.
  - Forward `focusRef` to the interactive element directly. There is no need to use `Paragraph` in this case.

  ```jsx
    import React, { useState, useRef } from 'react';
    import ShowHide from 'terra-show-hide';

    const MyComponent = () => {
      const focusRef = useRef(null);
      const [isOpen, setIsOpen] = useState(false);
      const toggleShowHide = () => setIsOpen(!isOpen);

      const previewText = 'Patients are requesting greater affordability and efficiency in healthcare.';

      return (
        <ShowHide focusRef={ focusRef } preview={ <p>{ previewText }</p> } isOpen={isOpen} onChange={toggleShowHide} >
          <p>{ previewText }</p>
          <a ref={this.focusRef} href="https://www.cerner.com/" alt="Oracle Cerner">Oracle Cerner</a>
        </ShowHide>
      );
    }
  ```

## Accessibility

<Notice variant="important" ariaLevel="3">

In order for the component to be accessible, it's important to follow the implimentation guidance. The focusRef prop is currently optional for backward compatibility, a failure to use it will result in lack of accessibility.

</Notice>

## Component Features

* [Cross-Browser Support](https://engineering.cerner.com/terra-ui/about/terra-ui/component-standards#cross-browser-support)
* [Responsive Support](https://engineering.cerner.com/terra-ui/about/terra-ui/component-standards#responsive-support)
* [Mobile Support](https://engineering.cerner.com/terra-ui/about/terra-ui/component-standards#mobile-support)
* [Internationalization Support](https://engineering.cerner.com/terra-ui/about/terra-ui/component-standards#internationalization-i18n)
* [Localization Support](https://engineering.cerner.com/terra-ui/about/terra-ui/component-standards#internationalization-i18n)
* [LTR/RTL Support](https://engineering.cerner.com/terra-ui/about/terra-ui/component-standards#ltr--rtl)

## Examples
<DefaultShowHide title="Default ShowHide" />
<CustomButtonTextShowHide title="Custom Button Text ShowHide" />
<LinkShowHide title="ShowHide with a Link" />
<MultipleChildrenShowHide title="ShowHide with Multiple Children" />
<InitiallyOpenShowHide title="Initially Open ShowHide" />
<ButtonAlignCenterShowHide title="Button Align Center ShowHide" />
<ButtonAlignRightShowHide title="Button Align Right ShowHide" />
<NoPreviewShowHide title="No Preview ShowHide" />
<NoFocusRefShowHide title="No focusRef ShowHide" description="Note: omitting focusRef is possible for backward compatibility. In this case the focus will be set to the content container. Hovewer, it does not provide full accessibility." />

## Show Hide Props
<ShowHidePropsTable />

## Paragraph Props
<ParagraphPropsTable />
